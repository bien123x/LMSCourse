<div class="container mx-auto flex flex-col">
  <div class="flex gap-x-5 bg-[#F8F8F8] p-3 rounded-lg mb-5">
    <div class="relative inline-block aspect-[16/9] w-full max-w-[400px]">
      <a href="">
        <img
          src="assets/images/{{ course()?.thumbnailUrl }}"
          alt="img"
          class="w-full h-full object-cover rounded-lg"
        />
        <!-- Icon play nằm giữa ảnh -->
        <div class="absolute inset-0 flex items-center justify-center">
          <i
            class="pi pi-play-circle text-white text-6xl opacity-80 hover:opacity-100 transition"
          ></i>
        </div>
      </a>
    </div>
    <div class="flex flex-col gap-2 justify-center flex-1">
      <h2>{{ course()?.title }}</h2>
      <p>{{ course()?.shortDescription }}</p>
      <div class="flex justify-between">
        <p>Giáo viên: {{ course()?.teacherName }}</p>
        <p>Học sinh tối đa: {{ course()?.maxStudents }}</p>
      </div>
      <div class="flex justify-between">
        <p>Loại: {{ course()?.categoryName }}</p>
        <p>Mức độ: {{ course()?.levelName }}</p>
        <p>Ngôn ngữ: {{ course()?.languageName }}</p>
      </div>
    </div>
  </div>
  <div class="flex gap-x-5">
    <div class="flex flex-col gap-y-5 w-[70%]">
      <div class="flex flex-col gap-y-1 border-1 border-surface-300 rounded-2xl p-5 bg-white">
        <h3 class="mb-3">Tổng quan</h3>
        <div>
          <h4>Mô tả khoá học</h4>
          <p>{{ course()?.description }}</p>
        </div>
        <div>
          <h4>Bạn sẽ học được!</h4>
          @for (topic of course()?.courseTopics; track topic.courseTopicId) {
          <p>{{ topic.title }}</p>
          }
        </div>
        <div>
          <h4>FAQ's</h4>
          @for (faqGroup of course()?.faqGroups; track faqGroup.faqGroupId) {
          <h5>{{ faqGroup.title }}</h5>
          @for (faqItem of faqGroup.faqItems; track faqItem.faqItemId) {
          <div class="flex gap-1 items-center">
            <i class="pi pi-question"></i>
            <p>{{ faqItem.question }}</p>
          </div>
          <div class="flex gap-1 items-center">
            <i class="pi pi-check"></i>
            <p>{{ faqItem.answer }}</p>
          </div>
          } }
        </div>
      </div>

      <div class="flex flex-col gap-y-1 border-1 border-surface-300 rounded-2xl p-5 bg-white">
        <h3 class="mb-3">Nội dung</h3>
        <p-accordion [value]="0" class="">
          @for (topic of course()?.courseTopics; track topic.courseTopicId) {
          <p-accordion-panel value="{{ topic.courseTopicId }}">
            <p-accordion-header class="bg-[#F8F8F8]">{{ topic.title }}</p-accordion-header>
            <p-accordion-content>
              @for (lesson of topic.lessons; track lesson.lessonId) {
              <div class="flex items-center">
                <i class="pi pi-play"></i>
                <span>{{ lesson.title }}</span>
              </div>
              }
            </p-accordion-content>
          </p-accordion-panel>
          }
        </p-accordion>
      </div>
    </div>
    <div class="w-[30%]">
      <div class="flex flex-col gap-y-5 bg-white p-5 border-1 border-surface-300 rounded-2xl">
        @if (course()?.isFree) {
        <h2 class="text-[#03C95A] text-[30px]">Free</h2>
        <p-button label="Tham gia" styleClass="w-full"></p-button>
        } @else {
        <div class="flex justify-between">
          <span>Giảm: {{ course()?.discountPrice | currency : 'VND' : 'symbol' : '1.0-0' }}</span>
          <p></p>
          @if (course()?.hasDiscount) {
          <p>
            <span class="line-through mr-1.5">
              {{ course()?.price | currency : 'VND' : 'symbol' : '1.0-0' }}
            </span>
            <span>
              Còn:
              {{ priceAfterDiscount | currency : 'VND' : 'symbol' : '1.0-0' }}
            </span>
          </p>

          } @else {
          <p>{{ course()?.price | currency : 'VND' : 'symbol' : '1.0-0' }}</p>
          }
        </div>
        <p-button label="Đăng ký" styleClass="w-full"></p-button>
        }
      </div>
    </div>
  </div>
</div>
