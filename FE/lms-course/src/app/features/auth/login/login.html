<p-toast />
<div class="flex flex-col gap-2.5">
  <div>
    <h3 class="mb-[10px] font-bold">Đăng nhập</h3>
    <hr />
  </div>

  <div>
    <p>
      Bạn chưa có tài khoản?
      <a class="text-blue-500 underline cursor-pointer" routerLink="/auth/register">Đăng ký</a>
    </p>
  </div>
  <form #loginForm="ngForm" (ngSubmit)="onSubmit(loginForm)" class="flex flex-col gap-2.5">
    <div class="">
      <p-iftalabel>
        <input
          class="w-full"
          pInputText
          id="UserNameOrEmail"
          [(ngModel)]="loginDto().UserNameOrEmail"
          name="UserNameOrEmail"
          required
          #UserNameOrEmail="ngModel"
        />
        <label for="UserNameOrEmail">Tên đăng nhập/Email</label>
      </p-iftalabel>
      @if (UserNameOrEmail.invalid && UserNameOrEmail.touched) { @if
      (UserNameOrEmail.hasError('required')) {
      <div>Tên đăng nhập/Email được rỗng!</div>
      } }
    </div>

    <div>
      <p-iftalabel>
        <p-password
          class="w-full"
          inputStyleClass="w-full"
          [(ngModel)]="loginDto().Password"
          inputId="Password"
          name="Password"
          required
          #Password="ngModel"
        ></p-password>
        <label for="Password">Mật khẩu</label>
      </p-iftalabel>
      @if (Password.invalid && Password.touched) { @if (Password.hasError('required')) {
      <div>Mật khẩu không được rỗng!</div>
      } }
    </div>
    <a class="text-blue-500 underline cursor-pointer">Quên mật khẩu?</a>

    <div>
      <p-button label="Đăng nhập" type="submit" styleClass="w-full" />
    </div>
  </form>
</div>

<p-dialog
  header="Đổi mật khẩu"
  modal="true"
  [(visible)]="visibleDialogPwd"
  (onHide)="visibleDialogPwd = false"
>
  <form [formGroup]="formChangePwd" (ngSubmit)="changePwdClick()" class="w-[400px]">
    <div class="flex flex-col gap-3 w-full">
      <p-iftalabel>
        <input
          pInputText
          id="nowPassword"
          formControlName="nowPassword"
          name="nowPassword"
          required
        />
        <label for="nowPassword">Mật khẩu hiện tại</label>
      </p-iftalabel>
      <p-iftalabel>
        <input
          pInputText
          id="newPassword"
          formControlName="newPassword"
          name="newPassword"
          required
        />
        <label for="newPassword">Mật khẩu mới</label>
      </p-iftalabel>
      <p-iftalabel>
        <input
          pInputText
          id="confirmNewPassword"
          formControlName="confirmNewPassword"
          name="confirmNewPassword"
          required
        />
        <label for="confirmNewPassword">Nhập lại mật khẩu mới</label>
      </p-iftalabel>
      <p-button type="submit" label="Đổi mật khẩu"></p-button>
    </div>
  </form>
</p-dialog>
